<!DOCTYPE html>
<html lang="ko" xmlns xmlns:th="http://www.w3.org/1999/xhtml" :th="http://thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>회원가입</title>
    <script src="https://code.jquery.com//jquery-3.4.1.js"></script>
    <link th:href="@{/css/style.css}" rel="stylesheet" type="text/css">
</head>
<style>
    body {
        background: #efa5a5;
    }
</style>
<body>
<div class="board_join">
    <p class="join_title">Create Account</p>
    <div class="join_table">
        <div class="join_section">
            <p><input type="text" id="mId" class="join_btn" placeholder="Username"></p>
        </div>
        <div class="join_section">
            <p><input type="password" id="mPassword" class="join_btn" placeholder="Password"></p>
        </div>
        <div class="join_section">
            <p><input type="password" id="mPasswordConfirm" class="join_btn" placeholder="Confirm Password"></p>
        </div>
    </div>
    <div class="bottom_join">
        <input type="button" class="join_bottom_btn" value="JOIN" onclick="joinBoard()">
    </div>
</div>

</body>
</html>
<script>
    function joinBoard() {

        document.getElementById("mId").value = document.getElementById("mId").value.trim();
        if (document.getElementById("mId").value === 0){
            alert("아이디를 입력해주세요.");
            document.getElementById("mId").focus();
            return false;
        }

        if (document.getElementById("mId").value < 4){
            alert("아이디를 4글자 이상 입력해주세요.");
            document.getElementById("mId").focus();
            return false;
        }

        document.getElementById("mPassword").value = document.getElementById("mPassword").value.trim();
        if(document.getElementById("mPassword").value === 0){
            alert("비밀번호를 입력해주세요.");
            document.getElementById("mPassword").focus();
            return false;
        }

        document.getElementById("mPasswordConfirm").value = document.getElementById("mPasswordConfirm").value.trim();
        if(document.getElementById("mPassword").value !== document.getElementById("mPasswordConfirm").value){
            alert("비밀번호가 일치하지 않습니다.");
            return false;
        }

        const memberList = {
            mId: document.getElementById("mId").value,
            mPassword: document.getElementById("mPassword").value
        }

        $.ajax({
            url: '/memberJoin',
            type: 'POST',
            data: memberList,
            success: function() {
                alert("성공하였습니다.");
                location.href="/home";
            },
            error: function() {
                alert("실패하였습니다.");
            }

        });


    }

</script>